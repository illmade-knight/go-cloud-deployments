name: bigquery-dataflow
project_id: gemini-power-test
region: europe-west2
service_manager_spec:
    name: servicedirector-bq-flow
    service_account: servicedirector-sa
    deployment:
        source_path: .
        buildable_module_path: cmd/bq-servicedirector
        image: europe-west2-docker.pkg.dev/gemini-power-test/cloud-deploy/servicedirector-bq-flow:eab79ffa
        image_repo: cloud-deploy
        service_url: ""
        region: europe-west2
        platform: ""
        cpu: "1"
        memory: 512Mi
        environment_vars:
            DATAFLOW_NAME: conductor
            PROJECT_ID: gemini-power-test
            SD_COMMAND_SUBSCRIPTION: director-command-sub-bq
            SD_COMMAND_TOPIC: director-commands-bq
            SD_COMPLETION_TOPIC: director-events-bq
            SERVICE_NAME: servicedirector-bq-flow
dataflows:
    bigquery-flow:
        name: ""
        services:
            bigquery-service:
                name: bigquery-service
                service_account: bigquery-sa
                deployment:
                    source_path: .
                    buildable_module_path: cmd/bigquery
                    image: europe-west2-docker.pkg.dev/gemini-power-test/cloud-deploy/bigquery-service:84e80499
                    image_repo: cloud-deploy
                    service_url: ""
                    region: europe-west2
                    platform: ""
                    cpu: "1"
                    memory: 512Mi
                    environment_vars:
                        BIGQUERY_DATASET: iot_data_bq
                        BIGQUERY_TABLE: ingested_payloads_bq
                        BQ_INGESTION_SUB_ID: bq-ingestion
                        DATAFLOW_NAME: bigquery-flow
                        INGESTED_PAYLOADS_BQ_WRITE_TABLE: ingested_payloads_bq
                        PROJECT_ID: gemini-power-test
                        SERVICE_NAME: bigquery-service
                dependencies:
                    - servicedirector-bq-flow
            ingestion-service:
                name: ingestion-service
                service_account: ingestion-sa
                deployment:
                    source_path: .
                    buildable_module_path: cmd/ingestion
                    image: europe-west2-docker.pkg.dev/gemini-power-test/cloud-deploy/ingestion-service:edc140f0
                    image_repo: cloud-deploy
                    service_url: ""
                    region: europe-west2
                    platform: ""
                    cpu: "1"
                    memory: 512Mi
                    environment_vars:
                        DATAFLOW_NAME: bigquery-flow
                        INGESTION_BQ_TOPIC_ID: ingestion-bq
                        MQTT_BROKER_URL: tcp://10.154.0.5:1883
                        MQTT_CLIENT_ID: test-client-devflow
                        MQTT_TOPIC: devices/+/data
                        MQTT_USERNAME: sreceiver
                        PROJECT_ID: gemini-power-test
                        SERVICE_NAME: ingestion-service
                    secret_environment_vars:
                        - name: MQTT_PASSWORD
                          value_from: SERVICE_PASS
                dependencies:
                    - servicedirector-bq-flow
        resources:
            topics:
                - name: ingestion-bq
                  producer_service:
                    name: ingestion-service
                    env: ""
            subscriptions:
                - name: bq-ingestion
                  topic: ingestion-bq
                  consumer_service:
                    name: bigquery-service
                    env: ""
            bigquery_datasets:
                - name: iot_data_bq
            bigquery_tables:
                - name: ingested_payloads_bq
                  producers:
                    - name: bigquery-service
                      env: ""
                  dataset: iot_data_bq
                  schema_type: github.com/illmade-knight/go-dataflow-service/dataflow/devflow/EnrichedTestPayload
                  schema_import_path: ""
                  clustering_fields:
                    - device_id
            gcs_buckets: []
deployment_environments: {}
